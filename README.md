`simian-import` is a go binary to upload pkgsinfo files to Simian. This enables autopkg integration, even though the uploadpkg view/endpoint for Simian was deprecated. To test the upload to your Simian instance, install the `gcloud` command line tool and authenticate with the AppEngine instance as your default project. Currently you need to supply a name for the 'pkg' (or dmg) being uploaded. In the future this may be extended to also upload to a Google Storage bucket.

You may not like the defaults built-in, namely that it assumes the 'safer' route of only allowing the uploaded item to be a managed _update_, to prevent patches going out that aren't necessarily on all computers, but should be updated if present (e.g. Skype). It also allows manifest modification for support and security staff, since they only have access to alter Users, anyway. You will need to alter the code and rebuild the binary for your preference if you'd like different behavior.

The autopkg processor found [here](https://github.com/autopkg/arubdesu-recipes/blob/master/SharedProcessors/ShoveStuffInABucket.py) enables auto-upload to an AWS CloudFront-ed S3 bucket and injects that PackageCompleteURL into the pkginfo before simian-import'ing. It bails if the pkg already exists in the bucket, but remember to MakeCatalogs on a 'scratch' local munki repo so that `__1`-appended duplicates aren't uploaded. Note that the processor allows world-read on the package as if it's not proprietary, so keep any 'secret' data either in the pkgsinfo (or forego using the processor and call the binary directly).

This was originally created as a hackathon project for [MacDevOpsYVR](https://www.mdoyvr.com/) 2017
